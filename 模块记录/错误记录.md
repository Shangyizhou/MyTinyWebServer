## 1

之前报错在`WebServer.h`里面找不到`HttpConn`的定义,但是我发现头文件包含了HttpConn,后来发现HttpConn也包含了WebServer.h的头文件,去掉了就行(这应该就是相互包含的错误,最好在之前加入一个定义)

## 2

之前是在Utils的SigHandler中的send函数中出现问题,它找不到 `pipefd_[1]`,原因是我并没有使用socketpair函数初始化这个数组,并且我需要让他和WebServer的管道一样,用于传递信号。

所以我直接将WebServer的管道数组赋值给了Utils的`pipefd_`,但是这又是一错误,数组不能直接赋值,数组名是地址,地址是不可修改的右值。所以我将Utils的管道数组该为指针形式,就可以赋值了

## 3

我发现`epoll`无法检测到读事件,然后gdb一步步走过去发现确实不行,猜测是没有让connfd被epoll监测,后来发现AddFd操作在HttpConn中, **但是里面的epollfd与WebServer的不一样** ,所以WebServer的无法检测到读事件。

## 4

没有接受到写任务,发现是在从状态机那里出现了问题,最后的返回结果提早返回了,导致每次返回的状态值都不正确

## 6

每次都会出现`EPOLLRDHUP`事件（客户端挂起）,通过GDB和printf函数发现当浏览器是短连接时服务端发完响应报文并未关闭connfd，而客户端已经挂起了，我们不能访问一个已经关闭的`fd`

长连接导致的EPOLLRDHUP事件

## 7

浏览器向服务器发出请求，但是我这里没有要求的源文件，会直接返回`NO_RESOURCE`，并根据这个返回值，关闭文件描述符。之前还没事情，但是后面浏览器会主动访问`icon`文件，导致有时明明显示长连接，我们的服务器还是主动关闭了连接，因为找不到`icon`的资源文件，所以直接根据这个`ReadProcess()`的返回值，关闭了HTTP连接，也就是`close connfd`。

**解决方法**

- 增加该文件
- 设置`No_RESOURCE`的返回值，让返回该值的情况下不关闭该连接

